digraph web_server {
	overlap=false;
//	overlap=scale;
	splines=true;
//	rankdir=BT;

	{
		rank=same;
		"Net Demultiplexer" [shape=box,style=filled,fillcolor="#b3b300"];
		"Network Driver" [shape=box,style=filled,fillcolor="#b3b300"];
		"Timer Driver" [shape=box,style=filled,fillcolor="#b3b300"];

		"Terminal Printer" [shape=octagon,style=filled,fillcolor="#b3b300"];
		"Memory Mapper" [shape=octagon,style=filled,fillcolor="#b3b300"];
	};
	{
		rank=same;
		"Connection Manager" [fillcolor="#b3b300",style=filled];
		"File Descriptor API" [fillcolor="#b3b300",style=filled];
	};

	"Socket API" [fillcolor="#b3b300",style=filled];
	"UDP" [fillcolor="#b3b300",style=filled];
	"TCP" [fillcolor="#b3b300",style=filled];
	"IP" [fillcolor="#b3b300",style=filled];
	"Port Manager" [fillcolor="#b3b300",style=filled];
	"Event Manager" [fillcolor="#b3b300",style=filled];

	"HTTP Parser" [fillcolor="#b3b300",style=filled];
	"CGI Services" [fillcolor="#cccccc",style=filled];
	"Content Manager" [fillcolor="#b3b300",style=filled];
	"Pipe" [style=filled,fillcolor="#b3b300"];
	"Service Lock" [style=filled,fillcolor="#b3b300"];
	"Static Content" [style=filled,fillcolor="#cccccc"];
	"Plugins" [fillcolor="#cccccc",style=filled];
	"Service Scheduler" [fillcolor="#b3b300",style=filled];

	"Base Scheduler" [fillcolor="#b3b300",style=filled];
	"Lock" [fillcolor="#b3b300",style=filled];
	"Timed Block" [fillcolor="#b3b300",style=filled];
	"MPD Manager" [fillcolor="#b3b300",style=filled];


	// Edges
	"Connection Manager" -> "File Descriptor API";
	"File Descriptor API" -> "Socket API";
	"File Descriptor API" -> "TCP";
	"File Descriptor API" -> "UDP";
	"File Descriptor API" -> "Event Manager";
	"HTTP Parser" -> "Content Manager";
	"Content Manager" -> "Plugins";
	"Content Manager" -> "Static Content";
	"Content Manager" -> "Pipe";
	"CGI Services" -> "Pipe";
	"Pipe" -> "Service Scheduler";
	"Pipe" -> "Service Lock";
	"Service Lock" -> "Service Scheduler";
	"Service Scheduler" -> "Base Scheduler";
	"Pipe" -> "Event Manager";
	"Socket API" -> "TCP";
	"Socket API" -> "UDP";
	"UDP" -> "IP";
	"TCP" -> "IP";
	"TCP" -> "Timed Block";
	"UDP" -> "Event Manager";
	"TCP" -> "Event Manager";
	"UDP" -> "Port Manager";
	"TCP" -> "Port Manager";
	"Port Manager" -> "Lock";
	"Port Manager" -> "Net Demultiplexer";
	"Event Manager" -> "Base Scheduler";
	"Event Manager" -> "Lock";
	"Lock" -> "Timed Block";
	"Lock" -> "Base Scheduler";
	"Timed Block" -> "Base Scheduler";
	"UDP" -> "Lock";
	"TCP" -> "Lock";
	"IP" -> "Lock";
//	"File Descriptor API" -> "Lock";
	"IP" -> "Net Demultiplexer" -> "Network Driver";
	"Base Scheduler" -> "Timer Driver";
	"File Descriptor API" -> "HTTP Parser";

	"MPD Manager" -> "Timed Block";	
}
