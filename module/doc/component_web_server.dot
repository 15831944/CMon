digraph web_server {
	overlap=false;
//	overlap=scale;
	splines=true;
//	rankdir=BT;
	
	{
		rank=same;
		"Net Demultiplexer" [shape=box];
		"Network Driver" [shape=box];
		"Timer Driver" [shape=box];
		"Terminal Printer" [shape=diamond];
		"Memory Mapper" [shape=diamond];
	};

	{
	"Socket API" [color=red];
	"Blocking Policy" [color=red];
	"UDP" [color=red];
	"TCP" [color=red];
	"IP" [color=red];
	"Port Manager" [color=red];
	"Net Event" [color=red];
	};

	{
	"Connection Manager" [color=blue];
	"HTTP Parser" [color=blue];
	"CGI Programs" [style=dashed];
	"Content Manager" [color=blue];
	"Thread Pool" [color=blue];
	"Static Content" [style=dashed];
	"Plugins" [style=dashed,color=blue];
	"Application Scheduler" [color=blue];
	"CGI Event" [color=blue];
	"File Descriptor API" [color=blue];
	};

	"Base Scheduler";
	"Lock";
	"Timed Event";
	"MPD Manager";
	

	// Edges
	"Connection Manager" -> "Socket API";
	"Connection Manager" -> "File Descriptor API";
	"File Descriptor API" -> "Socket API";
	"File Descriptor API" -> "Blocking Policy";
	"Socket API" -> "Blocking Policy";
	"Blocking Policy" -> "TCP";
	"Blocking Policy" -> "UDP";
	"Blocking Policy" -> "Lock";
	"Blocking Policy" -> "Net Event";
	"Connection Manager" -> "HTTP Parser";
	"HTTP Parser" -> "Content Manager";
	"Content Manager" -> "Plugins";
	"Content Manager" -> "Static Content";
	"Content Manager" -> "Thread Pool";
	"CGI Programs" -> "Thread Pool";
	"Thread Pool" -> "Application Scheduler";
	"Application Scheduler" -> "Base Scheduler";
	"Thread Pool" -> "CGI Event";
	"Socket API" -> "TCP";
	"Socket API" -> "UDP";
	"UDP" -> "IP";
	"TCP" -> "IP";
	"TCP" -> "Timed Event";
	"UDP" -> "Net Event";
	"TCP" -> "Net Event";
	"UDP" -> "Port Manager";
	"TCP" -> "Port Manager";
	"Port Manager" -> "Lock";
	"Port Manager" -> "Net Demultiplexer";
	"CGI Event" -> "Net Event";
	"CGI Event" -> "Base Scheduler";
	"Net Event" -> "Base Scheduler";
	"CGI Event" -> "Lock";
	"Net Event" -> "Lock";
	"Lock" -> "Timed Event";
	"Lock" -> "Base Scheduler";
	"Timed Event" -> "Base Scheduler";
	"UDP" -> "Lock";
	"TCP" -> "Lock";
	"IP" -> "Lock";
	"Thread Pool" -> "Lock";
	"File Descriptor API" -> "Lock";
	"IP" -> "Net Demultiplexer" -> "Network Driver";
	"Base Scheduler" -> "Timer Driver";

	"MPD Manager" -> "Timed Event";	
}
