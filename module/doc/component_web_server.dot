digraph web_server {
	overlap=false;
//	overlap=scale;
	splines=true;
//	rankdir=BT;

	"Memory Mapper" [shape=octagon,fillcolor="#dddddd",style=filled];
	{
		rank=same;

		"Network Driver" [shape=box,fillcolor="#dddddd",style=filled];
		"Timer Driver" [shape=box,fillcolor="#dddddd",style=filled];
	};
		"Terminal Printer" [shape=octagon,fillcolor="#dddddd",style=filled];
//	{
//		rank=same;
		"Connection Manager" [fillcolor="#dddddd",style=filled];
		"File Descriptor API" [fillcolor="#dddddd",style=filled];
//	};

//	"UDP" [fillcolor="#dddddd",style=filled];
	"TCP" [fillcolor="#dddddd",style=filled];

	"HTTP Parser" [fillcolor="#dddddd",style=filled];
	"CGI Services" [fillcolor="#dddddd",style=dashed];
	"CGI File Descriptor API" [fillcolor="#dddddd",style=filled];	
	"Content Manager" [fillcolor="#dddddd",style=filled];
	"Pipe" [fillcolor="#dddddd",style=filled];
	"Static Content" [style=dashed,fillcolor="#dddddd"];
//	"Plugins" [fillcolor="#dddddd",style=filled];
	"Scheduler" [fillcolor="#dddddd",style=filled];
	{
		rank=same;
		"IP" [fillcolor="#dddddd",style=filled];
		"Port Manager" [fillcolor="#dddddd",style=filled];
		"Event Manager" [fillcolor="#dddddd",style=filled];
	} 
	{
		rank=same;
		"MPD Manager" [fillcolor="#dddddd",style=filled];
		"Lock" [fillcolor="#dddddd",style=filled];
	}
	{
		rank=same;
		"Timed Block" [fillcolor="#dddddd",style=filled];
		"vNIC" [fillcolor="#dddddd",style=filled];
	}

	// Edges
	"Connection Manager" -> "File Descriptor API";
	"File Descriptor API" -> "TCP";
//	"File Descriptor API" -> "UDP";
	"File Descriptor API" -> "Event Manager";
	"HTTP Parser" -> "Content Manager";
	"HTTP Parser" -> "Timed Block";
//	"Content Manager" -> "Plugins";
	"Content Manager" -> "Static Content";
	"Static Content" -> "Event Manager";
	"Content Manager" -> "Pipe";
	"CGI Services" -> "CGI File Descriptor API";
	"CGI File Descriptor API" -> "Event Manager";
	"CGI File Descriptor API" -> "Pipe";
	"Pipe" -> "Event Manager";
	"Pipe" -> "Scheduler";
	"Pipe" -> "Lock";
//	"UDP" -> "IP";
	"TCP" -> "IP";
	"TCP" -> "Timed Block";
//	"UDP" -> "Event Manager";
	"TCP" -> "Event Manager";
//	"UDP" -> "Port Manager";
	"TCP" -> "Port Manager";
	"Port Manager" -> "Lock";
//	"Port Manager" -> "Net Demultiplexer";
	"Event Manager" -> "Scheduler";
	"Event Manager" -> "Lock";
	"Lock" -> "Timed Block";
	"Lock" -> "Scheduler";
	"Timed Block" -> "Scheduler";
//	"UDP" -> "Lock";
	"TCP" -> "Lock";
	"IP" -> "Lock";
//	"File Descriptor API" -> "Lock";
//	"IP" -> "Net Demultiplexer";
	"IP" -> "vNIC";
//	"IP" -> "Network Driver";
	"vNIC" -> "Network Driver";
	"vNIC" -> "Lock";
	"Scheduler" -> "Timer Driver";
	"File Descriptor API" -> "HTTP Parser";

	"MPD Manager" -> "Timed Block";	
}
